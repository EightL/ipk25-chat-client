<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="1170px" preserveAspectRatio="none" style="width:1666px;height:1170px;background:#FFFFFF;" version="1.1" viewBox="0 0 1666 1170" width="1666px" zoomAndPan="magnify"><defs/><g><!--cluster INIT--><g class="cluster" data-entity="INIT" data-source-line="10" data-uid="ent0002" id="cluster_INIT"><path d="M917.5,81 L1589.5,81 A12.5,12.5 0 0 1 1602,93.5 L1602,102.2969 L905,102.2969 L905,93.5 A12.5,12.5 0 0 1 917.5,81" fill="#FFFFE0" style="stroke:#FFFFE0;stroke-width:1;"/><rect fill="none" height="248.83" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="697" x="905" y="81"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="905" x2="1602" y1="102.2969" y2="102.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.2822" x="1239.8589" y="97.9951">INIT</text></g><!--cluster AUTHENTICATING--><g class="cluster" data-entity="AUTHENTICATING" data-source-line="29" data-uid="ent0005" id="cluster_AUTHENTICATING"><path d="M915.5,386.83 L1386.5,386.83 A12.5,12.5 0 0 1 1399,399.33 L1399,408.1269 L903,408.1269 L903,399.33 A12.5,12.5 0 0 1 915.5,386.83" fill="#FFFFE0" style="stroke:#FFFFE0;stroke-width:1;"/><rect fill="none" height="319.38" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="496" x="903" y="386.83"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="903" x2="1399" y1="408.1269" y2="408.1269"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.2568" x="1088.8716" y="403.8251">AUTHENTICATING</text></g><!--cluster JOIN_WAITING--><g class="cluster" data-entity="JOIN_WAITING" data-source-line="47" data-uid="ent0008" id="cluster_JOIN_WAITING"><path d="M19.5,577.01 L490.5,577.01 A12.5,12.5 0 0 1 503,589.51 L503,598.3069 L7,598.3069 L7,589.51 A12.5,12.5 0 0 1 19.5,577.01" fill="#FFFFE0" style="stroke:#FFFFE0;stroke-width:1;"/><rect fill="none" height="453.62" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="496" x="7" y="577.01"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="7" x2="503" y1="598.3069" y2="598.3069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.3008" x="205.8496" y="594.0051">JOIN_WAITING</text></g><!--cluster JOINED--><g class="cluster" data-entity="JOINED" data-source-line="72" data-uid="ent0012" id="cluster_JOINED"><path d="M749.5,767.18 L1446.5,767.18 A12.5,12.5 0 0 1 1459,779.68 L1459,788.4769 L737,788.4769 L737,779.68 A12.5,12.5 0 0 1 749.5,767.18" fill="#FFFFE0" style="stroke:#FFFFE0;stroke-width:1;"/><rect fill="none" height="270.44" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="722" x="737" y="767.18"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="737" x2="1459" y1="788.4769" y2="788.4769"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.376" x="1073.312" y="784.1751">JOINED</text></g><g id="INIT.init"><rect fill="#FFFFE0" height="120.1094" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="251.1758" x="929.41" y="185.72"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="929.41" x2="1180.5858" y1="212.0169" y2="212.0169"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22.1416" x="1043.9271" y="203.7151">init</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="165.3457" x="934.41" y="228.1555">getaddrinfo(serverAddress)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="208.7637" x="934.41" y="242.1243">socket(AF_INET, SOCK_STREAM, 0)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="57.1992" x="934.41" y="256.093">connect()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="156.3867" x="934.41" y="270.0618">setNonBlocking(socketFd)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90.3633" x="934.41" y="284.0305">epoll_create1()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="231.1758" x="934.41" y="297.9993">epoll_ctl ADD socketFd, STDIN_FILENO</text></g><g id="INIT.idle_init"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="194.8789" x="1215.56" y="213.66"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1215.56" x2="1410.4389" y1="239.9569" y2="239.9569"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.4209" x="1285.789" y="231.6551">idle_init</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144.873" x="1220.56" y="256.0955">watching stdin + socket</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174.8789" x="1220.56" y="270.0643">epoll_wait(timeout=1000ms)</text></g><g id="AUTHENTICATING.sending_auth"><rect fill="#FFFFE0" height="92.1719" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="429.8867" x="919.06" y="421.83"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="919.06" x2="1348.9467" y1="448.1269" y2="448.1269"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.1309" x="1086.9379" y="439.8251">sending_auth</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="409.8867" x="924.06" y="464.2655">authMsg = createTcpAuthMessage(username, displayName, secret)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="142.3066" x="924.06" y="478.2343">sendMessage(authMsg)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="139.0254" x="924.06" y="492.203">waitingForReply = true</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157.6348" x="924.06" y="506.1718">replyDeadline = now + 5s</text></g><g id="AUTHENTICATING.waiting_auth_reply"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="295.3555" x="919.32" y="625.97"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="919.32" x2="1214.6755" y1="652.2669" y2="652.2669"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.3027" x="1000.8464" y="643.9651">waiting_auth_reply</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="125.6426" x="924.32" y="668.4055">deadline = now + 5s</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="275.3555" x="924.32" y="682.3743">epoll_wait(timeout=min(1000ms, remaining))</text></g><g id="JOIN_WAITING.sending_join"><rect fill="#FFFFE0" height="92.1719" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="371.4805" x="69.26" y="612.01"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="69.26" x2="440.7405" y1="638.3069" y2="638.3069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.5342" x="211.2331" y="630.0051">sending_join</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="351.4805" x="74.26" y="654.4455">joinMsg = createTcpJoinMessage(channelId, displayName)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="136.6523" x="74.26" y="668.4143">sendMessage(joinMsg)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="139.0254" x="74.26" y="682.383">waitingForReply = true</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157.6348" x="74.26" y="696.3518">replyDeadline = now + 5s</text></g><g id="JOIN_WAITING.waiting_join_reply"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="295.3555" x="23.32" y="802.18"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="23.32" x2="318.6755" y1="828.4769" y2="828.4769"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.7061" x="108.1447" y="820.1751">waiting_join_reply</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="125.6426" x="28.32" y="844.6155">deadline = now + 5s</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="275.3555" x="28.32" y="858.5843">epoll_wait(timeout=min(1000ms, remaining))</text></g><g id="JOIN_WAITING.join_reply_processing"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="170.4043" x="313.8" y="950.4"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="313.8" x2="484.2043" y1="976.6969" y2="976.6969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150.4043" x="323.8" y="968.3951">join_reply_processing</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="142.9453" x="318.8" y="992.8355">waitingForReply = false</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132.2695" x="318.8" y="1006.8043">parse REPLY message</text></g><g id="JOINED.channel_idle"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="194.8789" x="808.56" y="802.18"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="808.56" x2="1003.4389" y1="828.4769" y2="828.4769"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.6777" x="862.1606" y="820.1751">channel_idle</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144.873" x="813.56" y="844.6155">watching stdin + socket</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174.8789" x="813.56" y="858.5843">epoll_wait(timeout=1000ms)</text></g><g id="JOINED.sending_chat"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="348.8926" x="1094.55" y="950.4"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1094.55" x2="1443.4426" y1="976.6969" y2="976.6969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.9551" x="1222.5188" y="968.3951">sending_chat</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="328.8926" x="1099.55" y="992.8355">msg = createTcpMsgMessage(displayName, message)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116.373" x="1099.55" y="1006.8043">sendMessage(msg)</text></g><g id="JOINED.sending_bye"><rect fill="#FFFFE0" height="78.2031" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="306.5938" x="752.7" y="943.41"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="752.7" x2="1059.2938" y1="969.7069" y2="969.7069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.1016" x="861.9461" y="961.4051">sending_bye</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="286.5938" x="757.7" y="985.8455">byeMsg = createTcpByeMessage(displayName)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137.1387" x="757.7" y="999.8143">sendMessage(byeMsg)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="126.5625" x="757.7" y="1013.783">state = TERMINATED</text></g><g id="TERMINATED"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="114.0195" x="672.99" y="1100.62"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="672.99" x2="787.0095" y1="1126.9169" y2="1126.9169"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.5605" x="684.2195" y="1118.6151">TERMINATED</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87.123" x="677.99" y="1143.0555">close(epoll_fd)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94.0195" x="677.99" y="1157.0243">close(socketFd)</text></g><ellipse cx="1313" cy="16" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><!--link *start* to INIT--><g class="link" data-entity-1="*start*" data-entity-2="INIT" data-source-line="8" data-uid="lnk3" id="link_*start*_INIT"><path d="M1313,26.33 C1313,37.515 1313,56.8775 1313,73.8712 C1313,75.9955 1313,78.0827 1313,80.1123 C1313,80.366 1313,74.6188 1313,74.8706" fill="none" id="*start*-to-INIT" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1313,80.8706,1317,71.8706,1313,75.8706,1309,71.8706,1313,80.8706" style="stroke:#00008B;stroke-width:1;"/></g><!--link idle_init to idle_init--><g class="link" data-entity-1="idle_init" data-entity-2="idle_init" data-source-line="22" data-uid="lnk4" id="link_idle_init_idle_init"><path d="M1410.9,227.98 C1431.01,229.88 1445.44,235.82 1445.44,245.78 C1445.44,255.74 1436.9831,261.1027 1416.8731,263.0127" fill="none" id="idle_init-to-idle_init" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1410.9,263.58,1420.2379,266.7111,1415.8776,263.1072,1419.4815,258.747,1410.9,263.58" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.6558" x="1478.6238" y="242.8469">socket event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1451.44" y="257.9797">processSocketInput()</text></g><!--link INIT to idle_init--><g class="link" data-entity-1="INIT" data-entity-2="idle_init" data-source-line="26" data-uid="lnk5" id="link_INIT_idle_init"><path d="M1313,109.12 C1313,114.52 1313,168.92 1313,207.28" fill="none" id="INIT-to-idle_init" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1313,213.28,1317,204.28,1313,208.28,1309,204.28,1313,213.28" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.2134" x="1314" y="151.7869">setup complete</text></g><!--link idle_init to sending_auth--><g class="link" data-entity-1="idle_init" data-entity-2="sending_auth" data-source-line="27" data-uid="lnk6" id="link_idle_init_sending_auth"><path d="M1287.35,278.32 C1256.81,315.89 1209.3359,374.2752 1174.5659,417.0252" fill="none" id="idle_init-to-sending_auth" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1170.78,421.68,1179.562,417.2218,1173.9349,417.801,1173.3556,412.1739,1170.78,421.68" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.1816" x="1224" y="366.8969">stdin "/auth" cmd</text></g><!--link sending_auth to waiting_auth_reply--><g class="link" data-entity-1="sending_auth" data-entity-2="waiting_auth_reply" data-source-line="35" data-uid="lnk7" id="link_sending_auth_waiting_auth_reply"><path d="M1117.78,514.47 C1105.54,548.84 1091.0825,589.4576 1080.2625,619.8476" fill="none" id="sending_auth-to-waiting_auth_reply" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1078.25,625.5,1085.037,618.363,1079.9271,620.7896,1077.5004,615.6797,1078.25,625.5" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.6636" x="1107" y="557.0769">message sent</text></g><!--link waiting_auth_reply to waiting_auth_reply--><g class="link" data-entity-1="waiting_auth_reply" data-entity-2="waiting_auth_reply" data-source-line="40" data-uid="lnk8" id="link_waiting_auth_reply_waiting_auth_reply"><path d="M1215.01,643.9 C1235.77,646.22 1249.68,650.95 1249.68,658.09 C1249.68,665.24 1241.7332,669.3065 1220.9732,671.6165" fill="none" id="waiting_auth_reply-to-waiting_auth_reply" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1215.01,672.28,1224.3972,675.2602,1219.9793,671.7271,1223.5124,667.3092,1215.01,672.28" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.6558" x="1282.8638" y="655.1569">socket event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1255.68" y="670.2897">processSocketInput()</text></g><!--link waiting_auth_reply to channel_idle--><g class="link" data-entity-1="waiting_auth_reply" data-entity-2="channel_idle" data-source-line="41" data-uid="lnk9" id="link_waiting_auth_reply_channel_idle"><path d="M953.08,690.52 C933.23,701.16 915.1,715.34 903,734.18 C890.26,754.03 890.771,775.1493 895.161,795.9493" fill="none" id="waiting_auth_reply-to-channel_idle" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="896.4,801.82,898.4552,792.188,895.3675,796.9278,890.6276,793.84,896.4,801.82" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.6597" x="904" y="747.2469">REPLY &amp;&amp; success</text></g><!--link waiting_auth_reply to channel_idle--><g class="link" data-entity-1="waiting_auth_reply" data-entity-2="channel_idle" data-source-line="70" data-uid="lnk18" id="link_waiting_auth_reply_channel_idle"><path d="M1058.68,690.53 C1052.49,709.57 1042.58,733.5 1028,751.18 C1011.43,771.27 993.7905,785.2141 972.4405,798.5341" fill="none" id="waiting_auth_reply-to-channel_idle-1" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="967.35,801.71,977.1031,800.3398,971.5921,799.0634,972.8685,793.5524,967.35,801.71" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71.1763" x="1039" y="747.2469">on success</text></g><!--link waiting_auth_reply to idle_init--><g class="link" data-entity-1="waiting_auth_reply" data-entity-2="idle_init" data-source-line="42" data-uid="lnk10" id="link_waiting_auth_reply_idle_init"><path d="M1207.48,625.51 C1267.08,604.41 1330.8,569.88 1366,514.01 C1413.15,439.18 1366.1318,336.2809 1335.7418,283.4509" fill="none" id="waiting_auth_reply-to-idle_init" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1332.75,278.25,1333.7704,288.0459,1335.2431,282.5841,1340.7049,284.0568,1332.75,278.25" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.8711" x="1386" y="472.4869">REPLY &amp;&amp; !success</text></g><!--link waiting_auth_reply to TERMINATED--><g class="link" data-entity-1="waiting_auth_reply" data-entity-2="TERMINATED" data-source-line="43" data-uid="lnk11" id="link_waiting_auth_reply_TERMINATED"><path d="M1215.11,677.9 C1313,693.73 1428.65,720.11 1459,759.18 C1537.09,859.72 1543.57,950.46 1459,1045.62 C1414.5,1095.68 957.3635,1121.3202 793.2535,1128.9802" fill="none" id="waiting_auth_reply-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="787.26,1129.26,796.4367,1132.836,792.2546,1129.0269,796.0637,1124.8447,787.26,1129.26" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1348" x="1521" y="909.4769">other message types</text></g><!--link sending_join to waiting_join_reply--><g class="link" data-entity-1="sending_join" data-entity-2="waiting_join_reply" data-source-line="53" data-uid="lnk12" id="link_sending_join_waiting_join_reply"><path d="M233.15,704.41 C218.37,735.05 201.8359,769.3454 188.7259,796.5354" fill="none" id="sending_join-to-waiting_join_reply" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="186.12,801.94,193.6319,795.5704,188.2916,797.4362,186.4258,792.0959,186.12,801.94" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.6636" x="219" y="747.2469">message sent</text></g><!--link waiting_join_reply to waiting_join_reply--><g class="link" data-entity-1="waiting_join_reply" data-entity-2="waiting_join_reply" data-source-line="58" data-uid="lnk13" id="link_waiting_join_reply_waiting_join_reply"><path d="M319.01,822.45 C339.77,824.38 353.68,828.33 353.68,834.3 C353.68,840.26 345.7442,843.6546 324.9842,845.5846" fill="none" id="waiting_join_reply-to-waiting_join_reply" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="319.01,846.14,328.3416,849.2897,323.9885,845.6772,327.6011,841.3241,319.01,846.14" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.6558" x="386.8638" y="831.3669">socket event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="359.68" y="846.4997">processSocketInput()</text></g><!--link waiting_join_reply to join_reply_processing--><g class="link" data-entity-1="waiting_join_reply" data-entity-2="join_reply_processing" data-source-line="59" data-uid="lnk14" id="link_waiting_join_reply_join_reply_processing"><path d="M212.75,866.74 C232.76,881.41 257.27,898.82 280,913.41 C299.53,925.95 316.2182,935.8649 335.8682,946.9849" fill="none" id="waiting_join_reply-to-join_reply_processing" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="341.09,949.94,335.2273,942.0262,336.7385,947.4775,331.2872,948.9886,341.09,949.94" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.4453" x="281" y="909.4769">REPLY received</text></g><!--link waiting_join_reply to TERMINATED--><g class="link" data-entity-1="waiting_join_reply" data-entity-2="TERMINATED" data-source-line="60" data-uid="lnk15" id="link_waiting_join_reply_TERMINATED"><path d="M149.58,866.85 C121.87,911.95 82.08,994.99 126,1045.62 C196.54,1126.93 529.8001,1133.4442 666.6201,1132.6642" fill="none" id="waiting_join_reply-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="672.62,1132.63,663.5973,1128.6814,667.6201,1132.6585,663.6429,1136.6812,672.62,1132.63" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.1685" x="127" y="987.0769">timeout (&gt;5s) or ERR/BYE</text></g><!--link join_reply_processing to channel_idle--><g class="link" data-entity-1="join_reply_processing" data-entity-2="channel_idle" data-source-line="65" data-uid="lnk16" id="link_join_reply_processing_channel_idle"><path d="M409.02,950.2 C416.68,931.51 429.17,909.04 448,896.41 C505.18,858.08 685.5463,843.9539 802.1763,838.6239" fill="none" id="join_reply_processing-to-channel_idle" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="808.17,838.35,798.9968,834.765,803.1752,838.5783,799.362,842.7567,808.17,838.35" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.4443" x="449" y="909.4769">REPLY (any)</text></g><!--link join_reply_processing to TERMINATED--><g class="link" data-entity-1="join_reply_processing" data-entity-2="TERMINATED" data-source-line="66" data-uid="lnk17" id="link_join_reply_processing_TERMINATED"><path d="M384.89,1015.02 C379.08,1033.22 376.3,1055.44 389,1070.62 C424.51,1113.05 579.1361,1125.7889 666.6861,1129.7489" fill="none" id="join_reply_processing-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="672.68,1130.02,663.8699,1125.6174,667.6851,1129.7941,663.5085,1133.6092,672.68,1130.02" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1348" x="390" y="1066.6869">other message types</text></g><!--link channel_idle to channel_idle--><g class="link" data-entity-1="channel_idle" data-entity-2="channel_idle" data-source-line="76" data-uid="lnk19" id="link_channel_idle_channel_idle"><path d="M1003.9,821.54 C1024.01,822.91 1038.44,827.16 1038.44,834.3 C1038.44,841.43 1029.9961,845.2722 1009.8861,846.6422" fill="none" id="channel_idle-to-channel_idle" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1003.9,847.05,1013.1511,850.429,1008.8884,846.7102,1012.6073,842.4475,1003.9,847.05" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.6558" x="1071.6238" y="831.3669">socket event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1044.44" y="846.4997">processSocketInput()</text></g><!--link channel_idle to sending_chat--><g class="link" data-entity-1="channel_idle" data-entity-2="sending_chat" data-source-line="77" data-uid="lnk20" id="link_channel_idle_sending_chat"><path d="M1003.77,844.62 C1084.29,853.98 1190.61,870.73 1225,896.41 C1242.59,909.55 1251.6991,926.1178 1258.3691,944.5578" fill="none" id="channel_idle-to-sending_chat" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1260.41,950.2,1261.1102,940.3761,1258.7093,945.4981,1253.5872,943.0972,1260.41,950.2" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.5474" x="1242" y="909.4769">stdin text message</text></g><!--link sending_chat to channel_idle--><g class="link" data-entity-1="sending_chat" data-entity-2="channel_idle" data-source-line="85" data-uid="lnk24" id="link_sending_chat_channel_idle"><path d="M1204.54,950.05 C1162.44,929.69 1111.29,905.37 1089,896.41 C1061.65,885.42 1037.1735,876.6631 1009.3535,867.4131" fill="none" id="sending_chat-to-channel_idle" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1003.66,865.52,1010.9383,872.1553,1008.4046,867.0976,1013.4623,864.5639,1003.66,865.52" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.2456" x="1124" y="909.4769">send success</text></g><!--link channel_idle to sending_bye--><g class="link" data-entity-1="channel_idle" data-entity-2="sending_bye" data-source-line="78" data-uid="lnk21" id="link_channel_idle_sending_bye"><path d="M906,866.66 C906,889.07 906,913.34 906,937.18" fill="none" id="channel_idle-to-sending_bye" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="906,943.18,910,934.18,906,938.18,902,934.18,906,943.18" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.8052" x="907" y="909.4769">stdin "/bye" cmd or SIGINT</text></g><!--link channel_idle to sending_join--><g class="link" data-entity-1="channel_idle" data-entity-2="sending_join" data-source-line="79" data-uid="lnk22" id="link_channel_idle_sending_join"><path d="M808.5,807.21 C707.37,780.14 553.046,738.8513 430.986,706.1813" fill="none" id="channel_idle-to-sending_join" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="425.19,704.63,432.8498,710.821,430.02,705.9228,434.9182,703.093,425.19,704.63" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.0562" x="581" y="747.2469">stdin "/join" cmd</text></g><!--link channel_idle to TERMINATED--><g class="link" data-entity-1="channel_idle" data-entity-2="TERMINATED" data-source-line="80" data-uid="lnk23" id="link_channel_idle_TERMINATED"><path d="M808.23,837.51 C729.99,845.08 624.78,869.55 571,943.41 C544.26,980.13 547.76,1006.59 571,1045.62 C592.93,1082.43 631.0134,1102.4978 667.0734,1115.0478" fill="none" id="channel_idle-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="672.74,1117.02,665.5548,1110.284,668.0178,1115.3765,662.9253,1117.8395,672.74,1117.02" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.5381" x="572" y="987.0769">socket ERR/BYE received</text></g><!--link sending_chat to TERMINATED--><g class="link" data-entity-1="sending_chat" data-entity-2="TERMINATED" data-source-line="86" data-uid="lnk25" id="link_sending_chat_TERMINATED"><path d="M1176.14,1014.99 C1144.79,1025.23 1109.51,1036.34 1077,1045.62 C975.83,1074.49 862.3573,1101.535 793.2773,1117.425" fill="none" id="sending_chat-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="787.43,1118.77,797.0976,1120.6507,792.3028,1117.6492,795.3043,1112.8543,787.43,1118.77" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76.7432" x="1040" y="1066.6869">send failure</text></g><!--link sending_bye to TERMINATED--><g class="link" data-entity-1="sending_bye" data-entity-2="TERMINATED" data-source-line="92" data-uid="lnk26" id="link_sending_bye_TERMINATED"><path d="M860.22,1022.07 C831.29,1046.43 798.98,1073.6458 771.85,1096.4858" fill="none" id="sending_bye-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="767.26,1100.35,776.7211,1097.6137,771.085,1097.1298,771.5689,1091.4937,767.26,1100.35" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.3774" x="819" y="1066.6869">after send</text></g><!--SRC=[dLTDR-Cs4BtxLx0vREKscsGFUp6G1UJOIRLDb8MZeWZQGc2biQs68WMAZciK_kyx52LRb6Z7gG-sENppD1zlAEb7ylWAaZ96c10lW_8bumMLD2UbeWh8VmD2nZHvMKYnukcDO4AI-sonLC_0c5ZhNI5Ja6PdGkNBdQGRDFjIYlNUEcOh66m7Wpz- -ejy_FY5164G3GRc6lf_TI6pp7YcgYKnVqTa0OgcgSpuN7WbI8pNnoMKvR2DAaNo0ihpR-CWd4RdvEdnvjVuAPfD_OTpScL14y4v9Cgp_K65WeyPqcHyuHcwszJ2G24OYnC96EWdpxMb6F4d4z9uOnZH90ZZs-1-6ZuYVhlFCsKGjvFThKTaJLMon2WGccQS_5ppzN3ceckQAKzbEOYLklvqTNMLDvNPGNNDsuw6Zy0hSFKdBwH8i9nFbJ7WnSgKPgixLdMdQTc5nG5gLM0jyuA1Wa5dNxlulqM_JCCekF6Z8BoxA85ZDekOhjHI-rUvdLtgvHb9yhGHXEtMaeP5OAhMuTG_3-M2N1FJf2WfV6t2xEW2l1NAXzCSpacQbGMZcx1Qb81eDNGHwcNZNPCxSRe7kBmLSWO5ss00IgBa7KYfzoT0KvPnG1mNQspmvxAFrIMiUIj3NBaYHMu2qcXbQSg1DcLoqgG7Wd227LBBC-uPkPrZLZd5llF5S7Y8us0w9udn8ENNHvptoKMof3ZKBDOAHCxPzDlzC_dmWPIhHDCTO-Wej_gq67uuWIAQpXw2q8-c4xBxZ8XGIv2xRgbD0MKpLgPVElRuTpyueFD_10w8hVFAD2BwfwFphzfKAxKkHf1QGX-wcDe2hrcTk1C4NYDF4dY5RIj26quNU0jj2zoYUKlW5lX_2hp5SJ2TTmgyGxbVnhMhlZCq0fMGGFOAwJ46bpgHe4wJU5y-bqE2T-hfR7OvVfvQ5NTVtHJzK6HzhSmfA-6e3pvrb53dLBV_2FwjmVSetmpVy7_tp7PkP-ywZmJVdKIjsSTBxwVUyZ05xf0SUopeGDzuCh3GEchBO2fnecfxLCs8uuPggAfu5VohhDuUTFrx0yHoFRj4K_MGe7Nw5Dm5OUIcQ1-f5zsphkRII_F4uQJe2MDNYtf0saEtxPtQLTxsgLsPy5YpJsmyQfkJrteSgKiqT56qZ-kyUrHNc5utZPDr8-mvM2dN3dEQiPK4PuwwGNQAsZ8Y-DsvBOtHqazowF1jfsPudAWgZkjMn3sG8o4wLpZL6cJVW5imdKvhYMy9J9JWcK6QL-y1ZktzQyBsEm00]--></g></svg>
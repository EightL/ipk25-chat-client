<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="1289px" preserveAspectRatio="none" style="width:1985px;height:1289px;background:#FFFFFF;" version="1.1" viewBox="0 0 1985 1289" width="1985px" zoomAndPan="magnify"><defs/><g><!--cluster INIT--><g class="cluster" data-entity="INIT" data-source-line="10" data-uid="ent0002" id="cluster_INIT"><path d="M1583.97,81 L1959.97,81 A12.5,12.5 0 0 1 1972.47,93.5 L1972.47,163.1719 L1571.47,163.1719 L1571.47,93.5 A12.5,12.5 0 0 1 1583.97,81" fill="#FFFFE0" style="stroke:#FFFFE0;stroke-width:1;"/><rect fill="none" height="253.96" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="401" x="1571.47" y="81"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1571.47" x2="1972.47" y1="163.1719" y2="163.1719"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1571.47" x2="1972.47" y1="102.2969" y2="102.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.2822" x="1758.3289" y="97.9951">INIT</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="200.6953" x="1576.47" y="115.9355">resolveHostname(serverAddress)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="204.7734" x="1576.47" y="129.9043">socket(AF_INET, SOCK_DGRAM, 0)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="156.3867" x="1576.47" y="143.873">setNonBlocking(socketFd)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154.4707" x="1576.47" y="157.8418">bind(socketFd, {port=0})</text></g><!--cluster AUTHENTICATING--><g class="cluster" data-entity="AUTHENTICATING" data-source-line="26" data-uid="ent0004" id="cluster_AUTHENTICATING"><path d="M1285.97,391.96 L1743.97,391.96 A12.5,12.5 0 0 1 1756.47,404.46 L1756.47,413.2569 L1273.47,413.2569 L1273.47,404.46 A12.5,12.5 0 0 1 1285.97,391.96" fill="#FFFFE0" style="stroke:#FFFFE0;stroke-width:1;"/><rect fill="none" height="439.65" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="483" x="1273.47" y="391.96"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1273.47" x2="1756.47" y1="413.2569" y2="413.2569"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.2568" x="1452.8416" y="408.9551">AUTHENTICATING</text></g><!--cluster JOIN_WAITING--><g class="cluster" data-entity="JOIN_WAITING" data-source-line="51" data-uid="ent0008" id="cluster_JOIN_WAITING"><path d="M26.97,709.39 L484.97,709.39 A12.5,12.5 0 0 1 497.47,721.89 L497.47,730.6869 L14.47,730.6869 L14.47,721.89 A12.5,12.5 0 0 1 26.97,709.39" fill="#FFFFE0" style="stroke:#FFFFE0;stroke-width:1;"/><rect fill="none" height="439.66" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="483" x="14.47" y="709.39"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="14.47" x2="497.47" y1="730.6869" y2="730.6869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.3008" x="206.8196" y="726.3851">JOIN_WAITING</text></g><!--cluster JOINED--><g class="cluster" data-entity="JOINED" data-source-line="75" data-uid="ent0012" id="cluster_JOINED"><path d="M743.97,885.6 L1375.97,885.6 A12.5,12.5 0 0 1 1388.47,898.1 L1388.47,906.8969 L731.47,906.8969 L731.47,898.1 A12.5,12.5 0 0 1 743.97,885.6" fill="#FFFFE0" style="stroke:#FFFFE0;stroke-width:1;"/><rect fill="none" height="270.44" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="657" x="731.47" y="885.6"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="731.47" x2="1388.47" y1="906.8969" y2="906.8969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.376" x="1035.282" y="902.5951">JOINED</text></g><g id="INIT.idle_init"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="187.2441" x="1595.85" y="246.72"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1595.85" x2="1783.0941" y1="273.0169" y2="273.0169"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.4209" x="1662.2616" y="264.7151">idle_init</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144.873" x="1600.85" y="289.1555">watching stdin + socket</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="167.2441" x="1600.85" y="303.1243">epoll_wait(timeout=100ms)</text></g><g id="AUTHENTICATING.sending_auth"><rect fill="#FFFFE0" height="78.2031" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="381.7637" x="1324.59" y="426.96"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1324.59" x2="1706.3537" y1="453.2569" y2="453.2569"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.1309" x="1468.4064" y="444.9551">sending_auth</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121.248" x="1329.59" y="469.3955">id = getNextMsgId()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="361.7637" x="1329.59" y="483.3643">createUdpAuthMessage(id, username, displayName, secret)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="273.3984" x="1329.59" y="497.333">sendUdpMessage(msg, requireConfirm=true)</text></g><g id="AUTHENTICATING.waiting_auth_reply"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="263.1582" x="1289.89" y="582.16"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1289.89" x2="1553.0482" y1="608.4569" y2="608.4569"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.3027" x="1355.3177" y="600.1551">waiting_auth_reply</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="125.6426" x="1294.89" y="624.5955">deadline = now + 5s</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="243.1582" x="1294.89" y="638.5643">select(timeout=min(100ms, remaining))</text></g><g id="AUTHENTICATING.auth_reply_processing"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="254.8672" x="1294.04" y="751.38"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1294.04" x2="1548.9072" y1="777.6769" y2="777.6769"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.001" x="1342.9731" y="769.3751">auth_reply_processing</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132.2695" x="1299.04" y="793.8155">parse REPLY message</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="234.8672" x="1299.04" y="807.7843">check msg.refMsgId == expectedRefId</text></g><g id="JOIN_WAITING.sending_join"><rect fill="#FFFFE0" height="78.2031" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="329.0117" x="79.96" y="744.39"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="79.96" x2="408.9717" y1="770.6869" y2="770.6869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.5342" x="200.6988" y="762.3851">sending_join</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121.248" x="84.96" y="786.8255">id = getNextMsgId()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="309.0117" x="84.96" y="800.7943">createUdpJoinMessage(id, channelId, displayName)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="273.3984" x="84.96" y="814.763">sendUdpMessage(msg, requireConfirm=true)</text></g><g id="JOIN_WAITING.waiting_join_reply"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="263.1582" x="30.89" y="920.6"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="30.89" x2="294.0482" y1="946.8969" y2="946.8969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.7061" x="99.6161" y="938.5951">waiting_join_reply</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="125.6426" x="35.89" y="963.0355">deadline = now + 5s</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="243.1582" x="35.89" y="977.0043">select(timeout=min(100ms, remaining))</text></g><g id="JOIN_WAITING.join_reply_processing"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="254.8672" x="224.04" y="1068.82"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="224.04" x2="478.9072" y1="1095.1169" y2="1095.1169"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150.4043" x="276.2714" y="1086.8151">join_reply_processing</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132.2695" x="229.04" y="1111.2555">parse REPLY message</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="234.8672" x="229.04" y="1125.2243">check msg.refMsgId == expectedRefId</text></g><g id="JOINED.channel_idle"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="187.2441" x="800.85" y="920.6"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="800.85" x2="988.0941" y1="946.8969" y2="946.8969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.6777" x="850.6332" y="938.5951">channel_idle</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144.873" x="805.85" y="963.0355">watching stdin + socket</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="167.2441" x="805.85" y="977.0043">epoll_wait(timeout=100ms)</text></g><g id="JOINED.sending_chat"><rect fill="#FFFFE0" height="78.2031" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="296.668" x="1076.14" y="1061.83"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="1076.14" x2="1372.808" y1="1088.1269" y2="1088.1269"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.9551" x="1177.9964" y="1079.8251">sending_chat</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121.248" x="1081.14" y="1104.2655">id = getNextMsgId()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="276.668" x="1081.14" y="1118.2343">createUdpMsgMessage(id, displayName, text)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="273.3984" x="1081.14" y="1132.203">sendUdpMessage(msg, requireConfirm=true)</text></g><g id="JOINED.sending_bye"><rect fill="#FFFFE0" height="78.2031" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="293.3984" x="747.77" y="1061.83"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="747.77" x2="1041.1684" y1="1088.1269" y2="1088.1269"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.1016" x="850.4184" y="1079.8251">sending_bye</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121.248" x="752.77" y="1104.2655">id = getNextMsgId()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="243.6387" x="752.77" y="1118.2343">createUdpByeMessage(id, displayName)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="273.3984" x="752.77" y="1132.203">sendUdpMessage(msg, requireConfirm=true)</text></g><g id="TERMINATED"><rect fill="#FFFFE0" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A9A9A9;stroke-width:0.5;" width="114.0195" x="837.46" y="1219.04"/><line style="stroke:#A9A9A9;stroke-width:0.5;" x1="837.46" x2="951.4795" y1="1245.3369" y2="1245.3369"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.5605" x="848.6895" y="1237.0351">TERMINATED</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94.0195" x="842.46" y="1261.4755">close(socketFd)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83.3965" x="842.46" y="1275.4443">socketFd = -1</text></g><ellipse cx="1689.47" cy="16" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><!--link *start* to INIT--><g class="link" data-entity-1="*start*" data-entity-2="INIT" data-source-line="8" data-uid="lnk3" id="link_*start*_INIT"><path d="M1689.47,26.47 C1689.47,34.625 1689.47,47.3594 1689.47,61.9253 C1689.47,65.5668 1689.47,69.3228 1689.47,73.1502 C1689.47,75.064 1689.47,76.9956 1689.47,78.9398 C1689.47,79.4258 1689.47,73.9126 1689.47,74.4002" fill="none" id="*start*-to-INIT" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1689.47,80.4002,1693.47,71.4002,1689.47,75.4002,1685.47,71.4002,1689.47,80.4002" style="stroke:#00008B;stroke-width:1;"/></g><!--link INIT to idle_init--><g class="link" data-entity-1="INIT" data-entity-2="idle_init" data-source-line="16" data-uid="lnk4" id="link_INIT_idle_init"><path d="M1689.47,170.03 C1689.47,174.03 1689.47,209.89 1689.47,240.25" fill="none" id="INIT-to-idle_init" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1689.47,246.25,1693.47,237.25,1689.47,241.25,1685.47,237.25,1689.47,246.25" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.2134" x="1690.47" y="212.7869">setup complete</text></g><!--link idle_init to sending_auth--><g class="link" data-entity-1="idle_init" data-entity-2="sending_auth" data-source-line="21" data-uid="lnk5" id="link_idle_init_sending_auth"><path d="M1659.95,311.26 C1629.99,343.15 1587.6781,388.197 1555.5781,422.367" fill="none" id="idle_init-to-sending_auth" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1551.47,426.74,1560.5475,422.9192,1554.8934,423.0958,1554.7168,417.4417,1551.47,426.74" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.1816" x="1613.47" y="372.0269">stdin "/auth" cmd</text></g><!--link idle_init to idle_init--><g class="link" data-entity-1="idle_init" data-entity-2="idle_init" data-source-line="22" data-uid="lnk6" id="link_idle_init_idle_init"><path d="M1783.41,266.01 C1803.53,267.29 1818.09,271.56 1818.09,278.84 C1818.09,286.12 1809.5179,290.0091 1789.3979,291.2891" fill="none" id="idle_init-to-idle_init" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1783.41,291.67,1792.6458,295.0905,1788.3999,291.3526,1792.1379,287.1067,1783.41,291.67" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.6558" x="1850.0963" y="275.9069">socket event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.6685" x="1824.09" y="291.0397">handleSocketEvent()</text></g><!--link sending_auth to waiting_auth_reply--><g class="link" data-entity-1="sending_auth" data-entity-2="waiting_auth_reply" data-source-line="31" data-uid="lnk7" id="link_sending_auth_waiting_auth_reply"><path d="M1490.77,505.48 C1475.43,529.34 1459.2156,554.5736 1444.8156,576.9636" fill="none" id="sending_auth-to-waiting_auth_reply" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1441.57,582.01,1449.8026,576.6041,1444.2746,577.8047,1443.0741,572.2767,1441.57,582.01" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.6636" x="1471.47" y="548.2269">message sent</text></g><!--link waiting_auth_reply to auth_reply_processing--><g class="link" data-entity-1="waiting_auth_reply" data-entity-2="auth_reply_processing" data-source-line="37" data-uid="lnk8" id="link_waiting_auth_reply_auth_reply_processing"><path d="M1421.47,646.73 C1421.47,676.53 1421.47,715.05 1421.47,744.9" fill="none" id="waiting_auth_reply-to-auth_reply_processing" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1421.47,750.9,1425.47,741.9,1421.47,745.9,1417.47,741.9,1421.47,750.9" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.4453" x="1422.47" y="689.4569">REPLY received</text></g><!--link waiting_auth_reply to TERMINATED--><g class="link" data-entity-1="waiting_auth_reply" data-entity-2="TERMINATED" data-source-line="38" data-uid="lnk9" id="link_waiting_auth_reply_TERMINATED"><path d="M1496.9,646.86 C1521.94,660.49 1548.08,678.61 1566.47,701.39 C1591.12,731.95 1601.47,743.24 1601.47,782.5 C1601.47,782.5 1601.47,782.5 1601.47,1101.93 C1601.47,1234.4 1126.0399,1249.1301 957.7299,1250.2501" fill="none" id="waiting_auth_reply-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="951.73,1250.29,960.7564,1254.23,956.7299,1250.2567,960.7032,1246.2302,951.73,1250.29" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.1685" x="1602.47" y="957.2869">timeout (&gt;5s) or ERR/BYE</text></g><!--link waiting_auth_reply to waiting_auth_reply--><g class="link" data-entity-1="waiting_auth_reply" data-entity-2="waiting_auth_reply" data-source-line="39" data-uid="lnk10" id="link_waiting_auth_reply_waiting_auth_reply"><path d="M1553.43,602.14 C1574.02,603.96 1588.05,608 1588.05,614.28 C1588.05,620.55 1579.997,624.0746 1559.407,625.8846" fill="none" id="waiting_auth_reply-to-waiting_auth_reply" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1553.43,626.41,1562.7457,629.6065,1558.4108,625.9722,1562.0451,621.6372,1553.43,626.41" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.1807" x="1594.05" y="611.3469">non-REPLY socket event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.8726" x="1626.2041" y="626.4797">sendConfirm()</text></g><!--link auth_reply_processing to channel_idle--><g class="link" data-entity-1="auth_reply_processing" data-entity-2="channel_idle" data-source-line="45" data-uid="lnk11" id="link_auth_reply_processing_channel_idle"><path d="M1322.04,816.05 C1226.14,846.48 1087.809,890.3654 993.889,920.1654" fill="none" id="auth_reply_processing-to-channel_idle" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="988.17,921.98,997.9583,923.0708,992.9359,920.4678,995.5388,915.4454,988.17,921.98" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.6597" x="1205.47" y="865.6669">REPLY &amp;&amp; success</text></g><!--link auth_reply_processing to idle_init--><g class="link" data-entity-1="auth_reply_processing" data-entity-2="idle_init" data-source-line="46" data-uid="lnk12" id="link_auth_reply_processing_idle_init"><path d="M1549.34,766.03 C1623.5,749.19 1711.13,715.16 1757.47,646.39 C1829.05,540.17 1776.15,480.75 1736.47,358.96 C1731.03,342.25 1724.8394,330.3275 1715.8394,316.4175" fill="none" id="auth_reply_processing-to-idle_init" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1712.58,311.38,1714.1107,321.1092,1715.2961,315.5779,1720.8274,316.7634,1712.58,311.38" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.8711" x="1793.47" y="548.2269">REPLY &amp;&amp; !success</text></g><!--link auth_reply_processing to TERMINATED--><g class="link" data-entity-1="auth_reply_processing" data-entity-2="TERMINATED" data-source-line="47" data-uid="lnk13" id="link_auth_reply_processing_TERMINATED"><path d="M1423.42,815.94 C1427.8,897.62 1434.64,1113.72 1388.47,1164.04 C1330.49,1227.22 1075.2057,1243.9327 957.8457,1248.3827" fill="none" id="auth_reply_processing-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="951.85,1248.61,960.9951,1252.2661,956.8464,1248.4205,960.692,1244.2719,951.85,1248.61" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1348" x="1424.47" y="1027.8969">other message types</text></g><!--link sending_join to waiting_join_reply--><g class="link" data-entity-1="sending_join" data-entity-2="waiting_join_reply" data-source-line="56" data-uid="lnk14" id="link_sending_join_waiting_join_reply"><path d="M225.66,822.86 C211.19,852.37 194.0811,887.2425 180.5411,914.8625" fill="none" id="sending_join-to-waiting_join_reply" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="177.9,920.25,185.4532,913.9295,180.1009,915.7604,178.27,910.4081,177.9,920.25" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.6636" x="212.47" y="865.6669">message sent</text></g><!--link waiting_join_reply to join_reply_processing--><g class="link" data-entity-1="waiting_join_reply" data-entity-2="join_reply_processing" data-source-line="62" data-uid="lnk15" id="link_waiting_join_reply_join_reply_processing"><path d="M197.21,984.99 C213.89,999.63 234.36,1017.06 253.47,1031.83 C269.53,1044.25 282.7169,1053.7491 298.9669,1064.9291" fill="none" id="waiting_join_reply-to-join_reply_processing" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="303.91,1068.33,298.7626,1059.9333,299.7908,1065.496,294.2281,1066.5241,303.91,1068.33" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.4453" x="254.47" y="1027.8969">REPLY received</text></g><!--link waiting_join_reply to TERMINATED--><g class="link" data-entity-1="waiting_join_reply" data-entity-2="TERMINATED" data-source-line="63" data-uid="lnk16" id="link_waiting_join_reply_TERMINATED"><path d="M107.11,985.31 C80.46,1003.83 51.16,1029.88 36.47,1061.83 C17.5,1103.11 6,1130.35 36.47,1164.04 C90.2,1223.43 647.6623,1243.5346 831.1023,1248.5946" fill="none" id="waiting_join_reply-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="837.1,1248.76,828.2137,1244.5134,832.1019,1248.6221,827.9931,1252.5103,837.1,1248.76" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.1685" x="37.47" y="1105.4969">timeout (&gt;5s) or ERR/BYE</text></g><!--link waiting_join_reply to waiting_join_reply--><g class="link" data-entity-1="waiting_join_reply" data-entity-2="waiting_join_reply" data-source-line="64" data-uid="lnk17" id="link_waiting_join_reply_waiting_join_reply"><path d="M294.43,940.58 C315.02,942.39 329.05,946.44 329.05,952.72 C329.05,958.99 320.997,962.5146 300.407,964.3246" fill="none" id="waiting_join_reply-to-waiting_join_reply" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="294.43,964.85,303.7457,968.0465,299.4108,964.4122,303.0451,960.0772,294.43,964.85" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.1807" x="335.05" y="949.7869">non-REPLY socket event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.8726" x="367.2041" y="964.9197">sendConfirm()</text></g><!--link join_reply_processing to channel_idle--><g class="link" data-entity-1="join_reply_processing" data-entity-2="channel_idle" data-source-line="70" data-uid="lnk18" id="link_join_reply_processing_channel_idle"><path d="M376.31,1068.42 C392.93,1049.66 416.48,1027.17 442.47,1014.83 C504.08,985.59 681.4362,968.4713 794.7962,960.1113" fill="none" id="join_reply_processing-to-channel_idle" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="800.78,959.67,791.5102,956.3428,795.7935,960.0377,792.0986,964.3211,800.78,959.67" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.4443" x="443.47" y="1027.8969">REPLY (any)</text></g><!--link join_reply_processing to TERMINATED--><g class="link" data-entity-1="join_reply_processing" data-entity-2="TERMINATED" data-source-line="71" data-uid="lnk19" id="link_join_reply_processing_TERMINATED"><path d="M354.81,1133.3 C358.56,1152.41 366.53,1175.65 383.47,1189.04 C452.6,1243.68 712.57,1250.3894 831.01,1250.5994" fill="none" id="join_reply_processing-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="837.01,1250.61,828.0171,1246.594,832.01,1250.6011,828.0029,1254.594,837.01,1250.61" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1348" x="384.47" y="1185.1069">other message types</text></g><!--link channel_idle to sending_join--><g class="link" data-entity-1="channel_idle" data-entity-2="sending_join" data-source-line="79" data-uid="lnk20" id="link_channel_idle_sending_join"><path d="M800.58,927.56 C694.28,900.21 525.4407,856.7851 400.2207,824.5651" fill="none" id="channel_idle-to-sending_join" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="394.41,823.07,402.1293,829.1865,399.2523,824.316,404.1229,821.4389,394.41,823.07" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.0562" x="570.47" y="865.6669">stdin "/join" cmd</text></g><!--link channel_idle to sending_chat--><g class="link" data-entity-1="channel_idle" data-entity-2="sending_chat" data-source-line="80" data-uid="lnk21" id="link_channel_idle_sending_chat"><path d="M988.34,964.51 C1060.75,974.47 1153.46,991.29 1183.47,1014.83 C1198.31,1026.47 1205.9799,1039.2133 1212.2499,1055.9033" fill="none" id="channel_idle-to-sending_chat" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="1214.36,1061.52,1214.9394,1051.6882,1212.6016,1056.8394,1207.4504,1054.5016,1214.36,1061.52" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.5474" x="1199.47" y="1027.8969">stdin text message</text></g><!--link sending_chat to channel_idle--><g class="link" data-entity-1="sending_chat" data-entity-2="channel_idle" data-source-line="90" data-uid="lnk25" id="link_sending_chat_channel_idle"><path d="M1159.46,1061.45 C1127.13,1042.63 1091.41,1022.43 1074.47,1014.83 C1047.07,1002.54 1022.0897,993.1646 993.9497,983.7446" fill="none" id="sending_chat-to-channel_idle" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="988.26,981.84,995.5247,988.4901,993.0014,983.4272,998.0643,980.9039,988.26,981.84" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.7871" x="1107.47" y="1027.8969">confirmed</text></g><!--link channel_idle to sending_bye--><g class="link" data-entity-1="channel_idle" data-entity-2="sending_bye" data-source-line="81" data-uid="lnk22" id="link_channel_idle_sending_bye"><path d="M894.47,985.08 C894.47,1007.49 894.47,1031.76 894.47,1055.6" fill="none" id="channel_idle-to-sending_bye" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="894.47,1061.6,898.47,1052.6,894.47,1056.6,890.47,1052.6,894.47,1061.6" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.8052" x="895.47" y="1027.8969">stdin "/bye" cmd or SIGINT</text></g><!--link channel_idle to TERMINATED--><g class="link" data-entity-1="channel_idle" data-entity-2="TERMINATED" data-source-line="82" data-uid="lnk23" id="link_channel_idle_TERMINATED"><path d="M800.59,956.38 C723.77,964.12 619.44,988.6 566.47,1061.83 C539.85,1098.64 538.73,1128.07 566.47,1164.04 C599.28,1206.57 746.0616,1231.4447 831.0516,1242.6647" fill="none" id="channel_idle-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="837,1243.45,828.6009,1238.3065,832.043,1242.7956,827.5539,1246.2377,837,1243.45" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.5381" x="567.47" y="1105.4969">socket ERR/BYE received</text></g><!--link channel_idle to channel_idle--><g class="link" data-entity-1="channel_idle" data-entity-2="channel_idle" data-source-line="83" data-uid="lnk24" id="link_channel_idle_channel_idle"><path d="M988.41,939.88 C1008.53,941.16 1023.09,945.44 1023.09,952.72 C1023.09,959.99 1014.5179,963.8891 994.3979,965.1691" fill="none" id="channel_idle-to-channel_idle" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="988.41,965.55,997.6458,968.9705,993.3999,965.2326,997.1379,960.9867,988.41,965.55" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.6558" x="1056.2738" y="949.7869">socket event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.0234" x="1029.09" y="964.9197">processSocketInput()</text></g><!--link sending_chat to TERMINATED--><g class="link" data-entity-1="sending_chat" data-entity-2="TERMINATED" data-source-line="91" data-uid="lnk26" id="link_sending_chat_TERMINATED"><path d="M1165.5,1140.45 C1138.98,1156.77 1106.85,1175.18 1076.47,1189.04 C1035.99,1207.5 993.9773,1221.6072 957.5473,1232.5272" fill="none" id="sending_chat-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="951.8,1234.25,961.5695,1235.4974,956.5895,1232.8143,959.2725,1227.8343,951.8,1234.25" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76.7432" x="1110.47" y="1185.1069">send failure</text></g><!--link sending_bye to TERMINATED--><g class="link" data-entity-1="sending_bye" data-entity-2="TERMINATED" data-source-line="98" data-uid="lnk27" id="link_sending_bye_TERMINATED"><path d="M894.47,1140.49 C894.47,1164.85 894.47,1189.93 894.47,1212.77" fill="none" id="sending_bye-to-TERMINATED" style="stroke:#00008B;stroke-width:1;"/><polygon fill="#00008B" points="894.47,1218.77,898.47,1209.77,894.47,1213.77,890.47,1209.77,894.47,1218.77" style="stroke:#00008B;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.561" x="895.47" y="1185.1069">after confirmation/timeout</text></g><!--SRC=[dLTHRzis47xth-3wqCcRiwGFVIdW0dBYfkeQPt1S3C4s2AnujZbJf4PISOqY_tr7IPP5MxBTvCaal-zqzzrz1FCpkNy2JOKWGgbLpwoupAYcAJ6MMY3VUuICQB9QQ9LBTgs4qkGpNopj8mYXrkvKQGQwFBcXUdMhwGQtGwtLUhSx4ZdqddkzltxvXrnSl2VH99hrUkKttE_YGyMFTqI3KU89FYfZ9KqXCA0nnP0nF33z7SweP0Ks23_4qMGy6v27- -lVuvlRQNWt85TD7DY9aYE1S2uNGKdxm1g8hrooUdz0lcTAs-7LSx-tXRYKEHCGSybj6JBFIABIJ8051ojBsM5SFSJZhAbDbfW0GXcNvDSg_mCSP4g8U4sv3InFGULs-ERgAYqgRo9TJWOanbh4DBTBbrOH-TMbMxuYISfQA5uPHGO4da3Ql-MIIZnxAFR6RYjmdtnsRIkh2x_CFeudi-Wwd4MJswB4yi1BewnyBpFEo90ii17mpTwPHSI2VXiiqO3nlh0inFKTjfik8E3OaXo7m0t3W31kCa4tas9X01csDPHROg1jaDGi1ZXP_-LSmxMISwxJeTKvj72TIax-xKQi8HCR39cMiHpQ5ihK0hJ0InbQup2WJ709A8bKQvo4jwORR410iXk5bCkW60TNJKgnaNBHxtVHNIcxPPnfbM0DRWZVaUduZy-F62G1_WJiM8JPU7eNJSBP-0PfLI8aUF_Mz0dQUpoTNeuUnyS2j1OcbRmeS_37qFMYwb0rWBNCxQMKIdULYRUPWQhOge57ySaIaXN1SVbDmxmOLJ8S4lYMOHU0JM4UiIDyLss2Hf8WOkSqKlnjnNxzcfWySTWJ8NOctVurGlnqNen6r-eOoYv1rtDiDnaOt-AVxgD9_6SOTHZyNuNtYs_mOkkqmIjORV1Fk6uQl18jOfx3MsEyoDa5jpcBRkC7dDs0-yxsufnojWV-SMStwAwKtV9iP-z5E9oHOapEylXUg9RjbvcylQfIzAwAkqpUXJ_NvEty0vDl9G-etFHF47t9pxGaWdTcz3vTwhANpR6dnXxq-6l30pSV75ihLWyEjzmzE3fPU61hbiMRmcjM9-th1aZZOxWilkK6yo6wZIQpThgdTFtOgKRPjyS1TqybVtYhZfOlfKXckTsVOQzW_xwiD3XrNrQm-hv4JFEwz5v1JibMzejkoeBRea5ICYh53j3xQkCvcLCkSWtjshYk-jAudTFAbAXQcD46EeHfexr84KTjiowTMxHkfGkrNCdBoaE-WniyLx3td4g4Ck3zJ-8TRmzGaeitlUV_0G00]--></g></svg>